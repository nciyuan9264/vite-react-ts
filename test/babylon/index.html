<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Circular Arrow with Babylon.js</title>
    <style>
        body {
            margin: 0;
        }

        canvas {
            display: block;
        }
    </style>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
</head>

<body>
    <script>
        // 创建场景
        var canvas = document.createElement("canvas");
        canvas.width = 500;
        canvas.height = 500;
        document.body.appendChild(canvas);
        var engine = new BABYLON.Engine(canvas, true);
        var scene = new BABYLON.Scene(engine);

        // 创建环形箭头
        var path = [];
        for (var i = 0; i <= 300; i += 10) {
            var angle = BABYLON.Tools.ToRadians(i);
            var x = Math.cos(angle) * 5;
            var z = Math.sin(angle) * 5;
            path.push(new BABYLON.Vector3(x, 0, z));
        }

        var tube = BABYLON.MeshBuilder.CreateTube("tube", {
            path: path,
            radius: 0.2,
            sideOrientation: BABYLON.Mesh.DOUBLESIDE,
            cap: BABYLON.Mesh.CAP_START
        }, scene);

        // 创建箭头头部
        var cone = BABYLON.MeshBuilder.CreateCylinder("cone", {
            height: 1,
            diameterTop: 0,
            diameterBottom: 1,
            tessellation: 96
        }, scene);
        cone.position = new BABYLON.Vector3(5, 0, -0.5);
        cone.rotation.x = BABYLON.Tools.ToRadians(-90);
        window.a = cone;
        // 合并箭头和箭头头部
        var arrow = BABYLON.Mesh.MergeMeshes([tube, cone], true);

        // 设置相机和光源
        var camera = new BABYLON.ArcRotateCamera("camera", 0, 0, 20, BABYLON.Vector3.Zero(), scene);
        camera.attachControl(canvas, true);
        var light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);

        // 渲染场景
        engine.runRenderLoop(function () {
            scene.render();
        });

        // 处理窗口调整事件
        window.addEventListener("resize", function () {
            engine.resize();
        });
    </script>
</body>

</html>