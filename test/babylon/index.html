<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Babylon.js Dashed TubeMesh Demo</title>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
</head>

<body>
    <canvas id="renderCanvas"></canvas>
    <script>
        window.addEventListener('DOMContentLoaded', function () {
            var canvas = document.getElementById('renderCanvas');
            var engine = new BABYLON.Engine(canvas, true);
            canvas.width = 800;
            canvas.height = 800;
            var createScene = function () {
                var scene = new BABYLON.Scene(engine);

                // 起点和终点
                var start = new BABYLON.Vector3(0, 0, 0);
                var end = new BABYLON.Vector3(0, 2, 0);

                // 添加更多点以模拟虚线
                var numSegments = 10;
                var path = [];

                for (var i = 0; i <= numSegments; i++) {
                    var t = i / numSegments;
                    var point = BABYLON.Vector3.Lerp(start, end, t);
                    path.push(point);
                }

                // 创建多段TubeMesh
                var tubeMeshes = [];
                var radius = 0.1;

                for (var i = 0; i < numSegments; i+=2) {
                    var tubeMesh = BABYLON.MeshBuilder.CreateTube("tubeMesh" + i, {
                        path: [path[i], path[i + 1]],
                        radius: radius,
                        tessellation: 64,
                        sideOrientation: BABYLON.Mesh.DOUBLESIDE,
                        updatable: true,
                    }, scene);

                    tubeMeshes.push(tubeMesh);
                }

                // 创建相机和光源
                var camera = new BABYLON.ArcRotateCamera("Camera", 0, 0, 10, BABYLON.Vector3.Zero(), scene);
                camera.attachControl(canvas, true);
                var light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);

                return scene;
            };

            var scene = createScene();

            engine.runRenderLoop(function () {
                scene.render();
            });

            window.addEventListener('resize', function () {
                engine.resize();
            });
        });
    </script>
</body>

</html>